<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>日本語読解</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;500&display=swap');

        :root {
            --bg-color: #fdfaf5;
            --paper-color: #ffffff;
            --text-color: #2c2c2c;
            --accent-color: #b33e3e; 
            --sub-color: #787878;
            --popup-bg: #333333;
            --chinese-font: "Microsoft YaHei", "PingFang SC", sans-serif;
            --japanese-font: 'Noto Serif JP', serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--japanese-font);
            margin: 0;
            padding: 100px 15px 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* 顶部控制栏 */
        .top-bar {
            position: fixed; top: 0; left: 0; right: 0;
            height: 60px; background: rgba(253, 250, 245, 0.95);
            backdrop-filter: blur(8px);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 25px; z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        #today-date { font-size: 0.85rem; color: var(--accent-color); font-weight: 500; border-bottom: 1px solid; }
        .toggle-btn {
            background: white; color: var(--accent-color); border: 1px solid var(--accent-color);
            padding: 6px 14px; border-radius: 20px; font-size: 0.8rem;
            font-family: var(--chinese-font); cursor: pointer; transition: 0.3s;
        }
        .toggle-btn:hover { background: var(--accent-color); color: white; }

        /* 主容器 */
        .container {
            max-width: 720px; width: 100%;
            background: var(--paper-color); padding: 50px 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        .header-title { text-align: center; margin-bottom: 50px; }
        .reading-block { margin-bottom: 45px; position: relative; }

        p.japanese {
            font-size: 1.15rem; line-height: 2.8; 
            text-align: justify; margin: 0;
        }

        ruby rt { font-size: 0.55em; color: var(--sub-color); letter-spacing: 0; }

        /* 译文（黑体中文） */
        .translation {
            display: none; margin-top: 20px; font-size: 0.95rem;
            color: #5a626b; line-height: 1.8; padding: 18px 20px;
            background-color: #f7f8f9; font-family: var(--chinese-font);
            border-left: 3px solid #eee; text-align: justify;
        }
        .translation::before { content: "訳"; display: block; font-size: 0.7rem; color: #ccc; margin-bottom: 5px; font-weight: bold; }

        /* 重点词汇样式 */
        .vocab-word {
            color: var(--accent-color);
            border-bottom: 2px solid #f2d0d0;
            cursor: pointer;
            font-weight: 500;
        }

        /* 动态气泡容器 */
        #smart-tooltip {
            position: absolute; z-index: 2000;
            background: var(--popup-bg); color: white;
            padding: 12px 16px; border-radius: 8px;
            font-size: 0.85rem; font-family: var(--chinese-font);
            line-height: 1.6; max-width: 280px; min-width: 140px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none; opacity: 0; pointer-events: none;
        }
        #smart-tooltip::after {
            content: ""; position: absolute; top: 100%;
            border: 8px solid transparent; border-top-color: var(--popup-bg);
        }

        .footer { margin-top: 50px; color: #ccc; font-size: 0.8rem; letter-spacing: 3px; }


        /* Audio Player - Fixed Bottom */
        .audio-wrapper {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 2000;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            padding: 15px 20px 25px 20px; /* Extra bottom padding for iPhone Home bar */
            display: flex;
            justify-content: center;
            border-top: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
        }

        .audio-player {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 600px; /* Wider on desktop */
        }

        .play-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--accent-color);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-right: 12px;
            flex-shrink: 0;
            transition: transform 0.2s;
            padding: 0;
        }

        .play-btn:active { transform: scale(0.95); }
        .play-btn svg { width: 14px; height: 14px; fill: white; margin-left: 2px; }
        .play-btn.playing svg { margin-left: 0; }

        .progress-container {
            flex-grow: 1;
            height: 4px;
            background-color: #f0f0f0;
            border-radius: 2px;
            margin-right: 12px;
            cursor: pointer;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background-color: #d1d1d1;
            width: 0%;
            border-radius: 2px;
        }

        .time-display {
            font-size: 0.7rem;
            color: #999;
            font-family: var(--chinese-font);
            min-width: 70px;
            text-align: right;
            font-variant-numeric: tabular-nums;
        }
    </style>
</head>
<body>

<div class="top-bar">
    <!-- 左侧返回按钮 -->
    <a href="../read.html" class="toggle-btn" style="text-decoration: none; margin-right: 15px;">← 戻る</a>
    
    <!-- 日期显示（可加 flex-grow 让它占据中间位置，或者保持原样） -->
    <div id="today-date" style="flex-grow: 1; text-align: center; border-bottom: none;">2026年2月25日 水曜日</div>
    
    <button id="trans-btn" class="toggle-btn" onclick="toggleTranslation()">訳文を表示/非表示</button>
</div>

<div class="container">
    <div class="header-title">
    <h2 style="font-weight: 500; letter-spacing: 0.1em; margin-bottom: 5px;">修学旅行で知ったこと</h2>
    <span style="color: #bbb; font-size: 0.8rem;">在修学旅行中了解到的事</span>
</div>



<div class="reading-block">
    <p class="japanese">
        <ruby>先<rt>せん</rt></ruby><ruby>日<rt>じつ</rt></ruby>、<ruby>東<rt>とう</rt></ruby><ruby>京<rt>きょう</rt></ruby>・<ruby>地<rt>ち</rt></ruby><ruby>下<rt>か</rt></ruby><ruby>鉄<rt>てつ</rt></ruby>サリン<ruby>事<rt>じ</rt></ruby><ruby>件<rt>けん</rt></ruby>から<ruby>二<rt>に</rt></ruby><ruby>十<rt>じゅう</rt></ruby><ruby>五<rt>ご</rt></ruby><ruby>年<rt>ねん</rt></ruby>との<ruby>報<rt>ほう</rt></ruby><ruby>道<rt>どう</rt></ruby>に<span class="vocab-word" data-info="接し（せっし）：（原型：接する，连用形）接触，碰到。"><ruby>接<rt>せっ</rt></ruby>し</span>、「もう<ruby>四<rt>し</rt></ruby><ruby>半<rt>はん</rt></ruby><ruby>世<rt>せい</rt></ruby><ruby>紀<rt>き</rt></ruby>か」とつくづく<ruby>思<rt>おも</rt></ruby>った。
    </p>
    <div class="translation">
        前些日子，看到关于东京地铁沙林毒气事件发生二十五周年的报道，我不禁感慨：“竟然已经过去四分之一个世纪了啊。”
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        <ruby>当<rt>とう</rt></ruby><ruby>時<rt>じ</rt></ruby>、<ruby>私<rt>わたし</rt></ruby>は<ruby>十<rt>じゅう</rt></ruby><ruby>七<rt>なな</rt></ruby><ruby>歳<rt>さい</rt></ruby>。その<ruby>日<rt>ひ</rt></ruby>は<ruby>高<rt>こう</rt></ruby><ruby>校<rt>こう</rt></ruby>の<ruby>修<rt>しゅう</rt></ruby><ruby>学<rt>がく</rt></ruby><ruby>旅<rt>りょ</rt></ruby><ruby>行<rt>こう</rt></ruby>で<ruby>長<rt>なが</rt></ruby><ruby>崎<rt>さき</rt></ruby>にいたが、<ruby>出<rt>しゅっ</rt></ruby><ruby>発<rt>ぱつ</rt></ruby><ruby>前<rt>まえ</rt></ruby>からその<ruby>行<rt>こう</rt></ruby><ruby>程<rt>てい</rt></ruby>は<span class="vocab-word" data-info="波乱含み（はらんぶくみ）：包含着波折，预示着风波。"><ruby>波<rt>は</rt></ruby><ruby>乱<rt>らん</rt></ruby><ruby>含<rt>ぶく</rt></ruby>み</span>だった。<ruby>二<rt>に</rt></ruby>か<ruby>月<rt>げつ</rt></ruby><ruby>前<rt>まえ</rt></ruby>に<ruby>発<rt>はっ</rt></ruby><ruby>生<rt>せい</rt></ruby>した<ruby>阪<rt>はん</rt></ruby><ruby>神<rt>しん</rt></ruby><ruby>淡<rt>あわ</rt></ruby><ruby>路<rt>じ</rt></ruby><ruby>大<rt>だい</rt></ruby><ruby>震<rt>しん</rt></ruby><ruby>災<rt>さい</rt></ruby>のため、<ruby>新<rt>しん</rt></ruby><ruby>幹<rt>かん</rt></ruby><ruby>線<rt>せん</rt></ruby>で<ruby>九<rt>きゅう</rt></ruby><ruby>州<rt>しゅう</rt></ruby>に<ruby>向<rt>む</rt></ruby>かう<ruby>予<rt>よ</rt></ruby><ruby>定<rt>てい</rt></ruby>は<ruby>変<rt>へん</rt></ruby><ruby>更<rt>こう</rt></ruby>。<ruby>我<rt>われ</rt></ruby>々は<ruby>在<rt>ざい</rt></ruby><ruby>校<rt>こう</rt></ruby><ruby>生<rt>せい</rt></ruby><ruby>代<rt>だい</rt></ruby><ruby>表<rt>ひょう</rt></ruby>として<ruby>三<rt>さん</rt></ruby><ruby>年<rt>ねん</rt></ruby><ruby>生<rt>せい</rt></ruby>の<ruby>卒<rt>そつ</rt></ruby><ruby>業<rt>ぎょう</rt></ruby><ruby>式<rt>しき</rt></ruby>に<ruby>出<rt>しゅっ</rt></ruby><ruby>席<rt>せき</rt></ruby>した<ruby>後<rt>あと</rt></ruby>、<ruby>大<rt>おお</rt></ruby><ruby>阪<rt>さか</rt></ruby><ruby>南<rt>なん</rt></ruby><ruby>港<rt>こう</rt></ruby>から<span class="vocab-word" data-info="フェリー：渡轮，渡船。">フェリー</span>で<ruby>別<rt>べっ</rt></ruby><ruby>府<rt>ぷ</rt></ruby>に<ruby>向<rt>む</rt></ruby>かった。<ruby>今<rt>いま</rt></ruby>でも<ruby>当<rt>とう</rt></ruby><ruby>時<rt>じ</rt></ruby>の<ruby>同<rt>どう</rt></ruby><ruby>級<rt>きゅう</rt></ruby><ruby>生<rt>せい</rt></ruby>に<ruby>会<rt>あ</rt></ruby>うと、「フェリーの<span class="vocab-word" data-info="雑魚寝（ざこね）：像小鱼一样挤在一起睡，大通铺。"><ruby>雑<rt>ざ</rt></ruby><ruby>魚<rt>こ</rt></ruby><ruby>寝<rt>ね</rt></ruby></span>は<ruby>背<rt>せ</rt></ruby><ruby>中<rt>なか</rt></ruby>が<ruby>痛<rt>いた</rt></ruby>かった」「せっかくの<ruby>卒<rt>そつ</rt></ruby><ruby>業<rt>ぎょう</rt></ruby><ruby>式<rt>しき</rt></ruby>に<span class="vocab-word" data-info="普段着（ふだんぎ）：便装，日常服装。"><ruby>普<rt>ふ</rt></ruby><ruby>段<rt>だん</rt></ruby><ruby>着<rt>ぎ</rt></ruby></span>で<span class="vocab-word" data-info="参列して（さんれつして）：（原型：参列する，て形）参加，出席。"><ruby>参<rt>さん</rt></ruby><ruby>列<rt>れつ</rt></ruby>して</span>しまい、<ruby>三<rt>さん</rt></ruby><ruby>年<rt>ねん</rt></ruby><ruby>生<rt>せい</rt></ruby>に<ruby>悪<rt>わる</rt></ruby>かった」との<ruby>話<rt>はなし</rt></ruby>が<ruby>飛<rt>と</rt></ruby>び<ruby>出<rt>だ</rt></ruby>してくる。
    </p>
    <div class="translation">
        当时，我十七岁。那一天，我正因高中的修学旅行身在长崎，但从出发前起，这段行程就可谓一波三折。由于两个月前发生了阪神淡路大地震，原本打算乘坐新干线前往九州的计划被迫变更。我们作为在校生代表出席了三年级的毕业典礼后，从大阪南港乘渡轮前往了别府。直到现在，每当和当时的老同学聚在一起，大家还会纷纷聊起“在渡轮上打地铺睡得背真疼啊”、“难得的毕业典礼我们竟然穿着便服就参加了，感觉挺对不住三年级学长们的”。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        <ruby>長<rt>なが</rt></ruby><ruby>崎<rt>さき</rt></ruby>での<ruby>予<rt>よ</rt></ruby><ruby>定<rt>てい</rt></ruby>は、<span class="vocab-word" data-info="班別（はんべつ）：分班，按班组。"><ruby>班<rt>はん</rt></ruby><ruby>別<rt>べつ</rt></ruby></span>での<ruby>市<rt>し</rt></ruby><ruby>内<rt>ない</rt></ruby><ruby>見<rt>けん</rt></ruby><ruby>学<rt>がく</rt></ruby>。ただ<ruby>集<rt>しゅう</rt></ruby><ruby>団<rt>だん</rt></ruby><ruby>行<rt>こう</rt></ruby><ruby>動<rt>どう</rt></ruby>が<ruby>苦<rt>にが</rt></ruby><ruby>手<rt>て</rt></ruby>な<ruby>私<rt>わたし</rt></ruby>はメンバーの<ruby>承<rt>しょう</rt></ruby><ruby>諾<rt>だく</rt></ruby>を<ruby>得<rt>え</rt></ruby>て、<ruby>一<rt>ひと</rt></ruby><ruby>人<rt>り</rt></ruby>で<ruby>街<rt>まち</rt></ruby><ruby>歩<rt>ある</rt></ruby>きをしていた。<span class="vocab-word" data-info="ほうぼう：到处，四处。">ほうぼう</span>の<ruby>観<rt>かん</rt></ruby><ruby>光<rt>こう</rt></ruby><ruby>名<rt>めい</rt></ruby><ruby>所<rt>しょ</rt></ruby>でクラスメイトと<ruby>出<rt>で</rt></ruby><ruby>会<rt>あ</rt></ruby>う<ruby>中<rt>なか</rt></ruby>で、「<ruby>長<rt>なが</rt></ruby><ruby>崎<rt>さき</rt></ruby><ruby>駅<rt>えき</rt></ruby>で<ruby>毒<rt>どく</rt></ruby>ガス<ruby>発<rt>はっ</rt></ruby><ruby>生<rt>せい</rt></ruby>だって」「さっきも<ruby>先<rt>せん</rt></ruby><ruby>生<rt>せい</rt></ruby>たちが<ruby>話<rt>はな</rt></ruby>していたよ。<ruby>大<rt>たい</rt></ruby><ruby>変<rt>へん</rt></ruby>なんだって」との<ruby>噂<rt>うわさ</rt></ruby>が<ruby>聞<rt>き</rt></ruby>こえてきた。
    </p>
    <div class="translation">
        在长崎的行程安排是分班级进行市内参观。不过，因为我不擅长集体行动，在征得小组成员的同意后，我便一个人在街头漫步。在各个观光名胜偶遇同班同学的过程中，我听到了一些传闻：“听说是长崎站发生了毒气泄漏”、“刚才老师们也在说呢，好像出大事了”。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        <ruby>本<rt>ほん</rt></ruby><ruby>当<rt>とう</rt></ruby>に？と<ruby>驚<rt>おどろ</rt></ruby>いたのは、つい<ruby>数<rt>すう</rt></ruby><ruby>時<rt>じ</rt></ruby><ruby>間<rt>かん</rt></ruby><ruby>前<rt>まえ</rt></ruby>に<ruby>見<rt>み</rt></ruby>た<ruby>長<rt>なが</rt></ruby><ruby>崎<rt>さき</rt></ruby><ruby>駅<rt>えき</rt></ruby>の<ruby>静<rt>しず</rt></ruby>けさと<ruby>毒<rt>どく</rt></ruby>ガスとの<ruby>言<rt>こと</rt></ruby><ruby>葉<rt>ば</rt></ruby>が<span class="vocab-word" data-info="そぐわなかった：（原型：そぐう，否定过去式）不相称，不协调，不符合。">そぐわなかった</span>ためだ。しかも<span class="vocab-word" data-info="物騒（ぶっそう）：危险，不太平，骚然。"><ruby>物<rt>ぶっ</rt></ruby><ruby>騒<rt>そう</rt></ruby></span>な<ruby>噂<rt>うわさ</rt></ruby>の<ruby>割<rt>わり</rt></ruby>に<ruby>市<rt>し</rt></ruby><ruby>内<rt>ない</rt></ruby>は<ruby>静<rt>しず</rt></ruby>かで、<ruby>救<rt>きゅう</rt></ruby><ruby>急<rt>きゅう</rt></ruby><ruby>車<rt>しゃ</rt></ruby>も<ruby>消<rt>しょう</rt></ruby><ruby>防<rt>ぼう</rt></ruby><ruby>車<rt>しゃ</rt></ruby>も<ruby>走<rt>はし</rt></ruby>っていない。<ruby>不<rt>ふ</rt></ruby><ruby>思<rt>し</rt></ruby><ruby>議<rt>ぎ</rt></ruby>に<ruby>思<rt>おも</rt></ruby>いつつゴール<ruby>地<rt>ち</rt></ruby><ruby>点<rt>てん</rt></ruby>であるホテルに<ruby>戻<rt>もど</rt></ruby>ると、<ruby>玄<rt>げん</rt></ruby><ruby>関<rt>かん</rt></ruby><ruby>脇<rt>わき</rt></ruby>のテレビが<ruby>東<rt>とう</rt></ruby><ruby>京<rt>きょう</rt></ruby>の<ruby>地<rt>ち</rt></ruby><ruby>下<rt>か</rt></ruby><ruby>鉄<rt>てつ</rt></ruby><ruby>構<rt>こう</rt></ruby><ruby>内<rt>ない</rt></ruby>で<ruby>毒<rt>どく</rt></ruby>ガスが<span class="vocab-word" data-info="撒かれた（まかれた）：（原型：撒く，被动态た形）被撒，被散布。"><ruby>撒<rt>ま</rt></ruby>かれた</span>と<ruby>繰<rt>く</rt></ruby>り<ruby>返<rt>かえ</rt></ruby>し<ruby>報<rt>ほう</rt></ruby>じていた。
    </p>
    <div class="translation">
        “真的吗？”我之所以感到诧异，是因为这与我几个小时前刚看到的长崎站的宁静景象，以及“毒气”这个词完全搭不上边。而且，尽管传闻如此骇人听闻，市内却一片祥和，既没有救护车，也没有消防车在路上疾驰。我怀揣着疑惑，回到了作为终点站的酒店，只见玄关旁的电视里正在循环播放着“东京地铁站内被散布了毒气”的新闻。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        <ruby>私<rt>わたし</rt></ruby>は<span class="vocab-word" data-info="デマ：谣言，虚假消息 (Demagogie)。">デマ</span>を<ruby>聞<rt>き</rt></ruby>いたのだ。そう<ruby>気<rt>き</rt></ruby>づくと<ruby>同<rt>どう</rt></ruby><ruby>時<rt>じ</rt></ruby>に、<ruby>二<rt>に</rt></ruby>か<ruby>月<rt>げつ</rt></ruby><ruby>前<rt>まえ</rt></ruby>の<ruby>阪<rt>はん</rt></ruby><ruby>神<rt>しん</rt></ruby><ruby>淡<rt>あわ</rt></ruby><ruby>路<rt>じ</rt></ruby><ruby>大<rt>だい</rt></ruby><ruby>震<rt>しん</rt></ruby><ruby>災<rt>さい</rt></ruby>の<ruby>際<rt>さい</rt></ruby>、「<ruby>一<rt>いっ</rt></ruby><ruby>週<rt>しゅう</rt></ruby><ruby>間<rt>かん</rt></ruby><ruby>後<rt>ご</rt></ruby>に<ruby>大<rt>おお</rt></ruby>きな<ruby>余<rt>よ</rt></ruby><ruby>震<rt>しん</rt></ruby>が<ruby>来<rt>く</rt></ruby>る」との<ruby>噂<rt>うわさ</rt></ruby>が<ruby>流<rt>なが</rt></ruby>れたと<ruby>思<rt>おも</rt></ruby>い<ruby>出<rt>だ</rt></ruby>した。<ruby>無<rt>む</rt></ruby><ruby>論<rt>ろん</rt></ruby>、それは<span class="vocab-word" data-info="根も葉もない（ねもはもない）：毫无根据，无中生有。"><ruby>根<rt>ね</rt></ruby>も<ruby>葉<rt>は</rt></ruby>もない</span>デマだったが、それでも「<ruby>一<rt>いっ</rt></ruby><ruby>週<rt>しゅう</rt></ruby><ruby>間<rt>かん</rt></ruby><ruby>後<rt>ご</rt></ruby>」のその<ruby>日<rt>ひ</rt></ruby>は<ruby>私<rt>わたし</rt></ruby>はおろか<ruby>周<rt>しゅう</rt></ruby><ruby>囲<rt>い</rt></ruby>の<ruby>大<rt>おと</rt></ruby><ruby>人<rt>な</rt></ruby>も、どこか<span class="vocab-word" data-info="怯えて（おびえて）：（原型：怯える，て形）害怕，胆怯。"><ruby>怯<rt>おび</rt></ruby>えて</span><ruby>一<rt>いち</rt></ruby><ruby>日<rt>にち</rt></ruby>を<ruby>過<rt>す</rt></ruby>ごしていた。
    </p>
    <div class="translation">
        原来我听到的是谣言。在意识到这一点的同时，我回想起两个月前阪神淡路大地震时，也曾流传过“一周后会有大余震”的传闻。当然，那是毫无根据的无稽之谈，但即便如此，在“一周后”的那一天，别说是我，就连周围的大人们也都惶恐不安地度过了一整天。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        デマとは<ruby>決<rt>けっ</rt></ruby>して、<ruby>百<rt>ひゃく</rt></ruby>パーセントの<ruby>嘘<rt>うそ</rt></ruby>ではない。<span class="vocab-word" data-info="なまじ：偏偏，由于（一知半解地）反而。这里指“偏偏因为混杂着事实反而容易传播”。">なまじ</span>どこかに<ruby>事<rt>じ</rt></ruby><ruby>実<rt>じつ</rt></ruby>が<ruby>混<rt>まじ</rt></ruby>じるから<ruby>広<rt>ひろ</rt></ruby>まりやすいと、<ruby>私<rt>わたし</rt></ruby>は<ruby>長<rt>なが</rt></ruby><ruby>崎<rt>さき</rt></ruby>で<ruby>学<rt>まな</rt></ruby>んだ。あれから<ruby>四<rt>し</rt></ruby><ruby>半<rt>はん</rt></ruby><ruby>世<rt>せい</rt></ruby><ruby>紀<rt>き</rt></ruby>、<ruby>大<rt>だい</rt></ruby><ruby>事<rt>じ</rt></ruby><ruby>件<rt>けん</rt></ruby>に<span class="vocab-word" data-info="併せて（あわせて）：（原型：併せる，て形）结合，伴随。"><ruby>併<rt>あわ</rt></ruby>せて</span>デマが<span class="vocab-word" data-info="飛び交う（とびかう）：交错飞舞，纷飞，满天飞。"><ruby>飛<rt>と</rt></ruby>び<ruby>交<rt>か</rt></ruby>う</span><ruby>様<rt>さま</rt></ruby>は<ruby>今<rt>いま</rt></ruby>も<ruby>変<rt>か</rt></ruby>わらない。だから<ruby>私<rt>わたし</rt></ruby>は<span class="vocab-word" data-info="心騒ぐ（こころさわぐ）：心神不宁，内心躁动不安。"><ruby>心<rt>こころ</rt></ruby><ruby>騒<rt>さわ</rt></ruby>ぐ</span><ruby>話<rt>はなし</rt></ruby>を<ruby>聞<rt>き</rt></ruby>くと、<ruby>単<rt>たん</rt></ruby><ruby>身<rt>しん</rt></ruby>、<ruby>長<rt>なが</rt></ruby><ruby>崎<rt>さき</rt></ruby>を<ruby>歩<rt>ある</rt></ruby>き<ruby>回<rt>まわ</rt></ruby>ったあの<ruby>日<rt>ひ</rt></ruby>を<ruby>思<rt>おも</rt></ruby>い<ruby>出<rt>だ</rt></ruby>す。<ruby>石<rt>いし</rt></ruby><ruby>畳<rt>だたみ</rt></ruby>の<ruby>坂<rt>さか</rt></ruby>を<ruby>登<rt>のぼ</rt></ruby>りながら、<ruby>本<rt>ほん</rt></ruby><ruby>当<rt>とう</rt></ruby>かなあと<ruby>首<rt>くび</rt></ruby>を<span class="vocab-word" data-info="ひねった：（原型：ひねる，た形）歪（着头），表示疑惑或思考。">ひねった</span><ruby>気<rt>き</rt></ruby><ruby>持<rt>も</rt></ruby>ちは<ruby>常<rt>つね</rt></ruby>に<ruby>忘<rt>わす</rt></ruby>れずにいたい。
    </p>
    <div class="translation">
        谣言绝对不是百分之百的谎言。正是因为它往往多多少少掺杂了一些事实，才更容易传播开来——这是我在长崎学到的道理。从那以后过去了四分之一个世纪，伴随重大事件而来的谣言满天飞的现象，至今依然如故。所以，每当听到那些动摇人心的消息时，我就会想起只身一人在长崎街头漫步的那一天。那份一边爬着石板坡，一边歪着头怀疑“这到底是不是真的呢”的心情，我希望自己能永远铭记。
    </div>
</div>
</div>

<div id="smart-tooltip"></div>

<!-- Audio Player - Fixed Bottom -->
<div class="audio-wrapper">
    <div class="audio-player">
        <button id="play-btn" class="play-btn" onclick="togglePlay()">
            <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        </button>
        <div class="progress-container" id="progress-container" onclick="seek(event)">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="time-display">
            <span id="current-time">00:00</span> / <span id="duration">00:00</span>
        </div>
        <audio id="audio-element" src="../audio_read/2.25.mp3" preload="metadata"></audio>
    </div>
</div>

<div class="footer">Ichigo Ichie - 一期一会</div>

<script>
    // 1. (已移除) 实时日期逻辑 -> 改为在 HTML 中手动输入

    // 2. 译文切换
    function toggleTranslation() {
        const btn = document.getElementById('trans-btn');
        const isActive = btn.classList.toggle('active');
        
        document.querySelectorAll('.translation').forEach(el => {
            el.style.display = isActive ? 'block' : 'none';
        });
    }

    // 3. 智能自适应气泡逻辑
    const tooltip = document.getElementById('smart-tooltip');
    let activeWord = null;

    document.querySelectorAll('.vocab-word').forEach(word => {
        word.addEventListener('click', function(e) {
            e.stopPropagation();
            if (activeWord === this) { hideTooltip(); return; }

            activeWord = this;
            tooltip.innerText = this.getAttribute('data-info');
            tooltip.style.display = 'block';

            const rect = this.getBoundingClientRect();
            const tipRect = tooltip.getBoundingClientRect();
            const screenWidth = window.innerWidth;
            
            // 计算初始位置
            let left = rect.left + (rect.width / 2) - (tipRect.width / 2);
            let top = rect.top + window.scrollY - tipRect.height - 12;

            // 溢出检测与修正
            const margin = 15;
            let arrowOffset = '50%';

            if (left < margin) {
                left = margin;
                arrowOffset = (rect.left + rect.width/2 - margin) + 'px';
            } else if (left + tipRect.width > screenWidth - margin) {
                left = screenWidth - tipRect.width - margin;
                arrowOffset = (rect.left + rect.width/2 - left) + 'px';
            }

            tooltip.style.left = left + 'px';
            tooltip.style.top = top + 'px';
            tooltip.style.opacity = '1';

            // 动态修正箭头位置
            const styleTag = document.getElementById('dynamic-arrow') || document.createElement('style');
            styleTag.id = 'dynamic-arrow';
            styleTag.innerHTML = `#smart-tooltip::after { left: ${arrowOffset} !important; transform: translateX(-50%); }`;
            document.head.appendChild(styleTag);
        });
    });

    function hideTooltip() {
        tooltip.style.opacity = '0';
        setTimeout(() => { tooltip.style.display = 'none'; }, 200);
        activeWord = null;
    }

    document.addEventListener('click', hideTooltip);
    window.addEventListener('resize', hideTooltip);


    // --- Audio Player Logic ---
    const audio = document.getElementById('audio-element');
    const playBtn = document.getElementById('play-btn');
    const progressBar = document.getElementById('progress-bar');
    const progressContainer = document.getElementById('progress-container');
    const currentTimeEl = document.getElementById('current-time');
    const durationEl = document.getElementById('duration');

    function togglePlay() {
        if (audio.paused) {
            audio.play().catch(e => console.log("Audio play error:", e));
            playBtn.classList.add('playing');
            playBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';
        } else {
            audio.pause();
            playBtn.classList.remove('playing');
            playBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
        }
    }

    function seek(e) {
        const rect = progressContainer.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const percent = x / rect.width;
        audio.currentTime = percent * audio.duration;
    }

    audio.addEventListener('timeupdate', () => {
        if (audio.duration) {
            const percent = (audio.currentTime / audio.duration) * 100;
            progressBar.style.width = percent + '%';
            currentTimeEl.textContent = formatTime(audio.currentTime);
        }
    });

    audio.addEventListener('loadedmetadata', () => {
        durationEl.textContent = formatTime(audio.duration);
    });

    audio.addEventListener('ended', () => {
        playBtn.classList.remove('playing');
        playBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
        progressBar.style.width = '0%';
    });

    function formatTime(seconds) {
        const min = Math.floor(seconds / 60);
        const sec = Math.floor(seconds % 60);
        return `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
    }
</script>

</body>
</html>
