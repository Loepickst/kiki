<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>日本語読解 | 予備の本</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;500&display=swap');

        :root {
            --bg-color: #fdfaf5;
            --paper-color: #ffffff;
            --text-color: #2c2c2c;
            --accent-color: #b33e3e; 
            --sub-color: #787878;
            --popup-bg: #333333;
            --chinese-font: "Microsoft YaHei", "PingFang SC", sans-serif;
            --japanese-font: 'Noto Serif JP', serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--japanese-font);
            margin: 0;
            padding: 100px 15px 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* 顶部控制栏 */
        .top-bar {
            position: fixed; top: 0; left: 0; right: 0;
            height: 60px; background: rgba(253, 250, 245, 0.95);
            backdrop-filter: blur(8px);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 25px; z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        #today-date { font-size: 0.85rem; color: var(--accent-color); font-weight: 500; border-bottom: 1px solid; }
        .toggle-btn {
            background: white; color: var(--accent-color); border: 1px solid var(--accent-color);
            padding: 6px 14px; border-radius: 20px; font-size: 0.8rem;
            font-family: var(--chinese-font); cursor: pointer; transition: 0.3s;
        }
        .toggle-btn:hover { background: var(--accent-color); color: white; }

        /* 主容器 */
        .container {
            max-width: 720px; width: 100%;
            background: var(--paper-color); padding: 50px 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        .header-title { text-align: center; margin-bottom: 50px; }
        .reading-block { margin-bottom: 45px; position: relative; }

        p.japanese {
            font-size: 1.15rem; line-height: 2.8; 
            text-align: justify; margin: 0;
        }

        ruby rt { font-size: 0.55em; color: var(--sub-color); letter-spacing: 0; }

        /* 译文（黑体中文） */
        .translation {
            display: none; margin-top: 20px; font-size: 0.95rem;
            color: #5a626b; line-height: 1.8; padding: 18px 20px;
            background-color: #f7f8f9; font-family: var(--chinese-font);
            border-left: 3px solid #eee; text-align: justify;
        }
        .translation::before { content: "訳"; display: block; font-size: 0.7rem; color: #ccc; margin-bottom: 5px; font-weight: bold; }

        /* 重点词汇样式 */
        .vocab-word {
            color: var(--accent-color);
            border-bottom: 2px solid #f2d0d0;
            cursor: pointer;
            font-weight: 500;
        }

        /* 动态气泡容器 */
        #smart-tooltip {
            position: absolute; z-index: 2000;
            background: var(--popup-bg); color: white;
            padding: 12px 16px; border-radius: 8px;
            font-size: 0.85rem; font-family: var(--chinese-font);
            line-height: 1.6; max-width: 280px; min-width: 140px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none; opacity: 0; pointer-events: none;
        }
        #smart-tooltip::after {
            content: ""; position: absolute; top: 100%;
            border: 8px solid transparent; border-top-color: var(--popup-bg);
        }

        .footer { margin-top: 50px; color: #ccc; font-size: 0.8rem; letter-spacing: 3px; }
    </style>
</head>
<body>

<div class="top-bar">
    <!-- 左侧返回按钮 -->
    <a href="../read.html" class="toggle-btn" style="text-decoration: none; margin-right: 15px;">← 戻る</a>
    
    <!-- 日期显示（可加 flex-grow 让它占据中间位置，或者保持原样） -->
    <div id="today-date" style="flex-grow: 1; text-align: center; border-bottom: none;">2026年2月3日 火曜日</div>
    
    <button class="toggle-btn" onclick="toggleTranslation()">訳文を表示/非表示</button>
</div>

<div class="container">
    <div class="header-title">
        <h2 style="font-weight: 500; letter-spacing: 0.2em; margin-bottom: 5px;">予備の本</h2>
        <span style="color: #bbb; font-size: 0.8rem;">备用的书</span>
    </div>

    <div class="reading-block">
        <p class="japanese">
            <ruby>想像力<rt>そうぞうりょく</rt></ruby>が<ruby>豊<rt>ゆた</rt></ruby>かすぎるせいか、<span class="vocab-word" data-info="出先（でさき）：外出目的地，出门在外的地方。">出先</span>で<ruby>何<rt>なに</rt></ruby>かあったらと<ruby>不安<rt>ふあん</rt></ruby>になり、つい<ruby>色々<rt>いろいろ</rt></ruby>なものの<span class="vocab-word" data-info="予備（よび）：备用品，为防万一而提前准备的东西。">予備</span>をカバンに<ruby>詰<rt>つ</rt></ruby>めてしまう。モバイルバッテリー、<ruby>飲<rt>の</rt></ruby>み<ruby>物<rt>もの</rt></ruby>、<ruby>移動中<rt>いどうちゅう</rt></ruby>に<ruby>読<rt>よ</rt></ruby>む<ruby>本<rt>ほん</rt></ruby>、エコバッグ。
        </p>
        <div class="translation">
            或许是因为想象力过于丰富，我总担心出门在外会遇到突发状况，于是包里总是不知不觉塞满了各种“备用品”。充电宝、饮料、路上读的书、购物袋，应有尽有。
        </div>
    </div>

    <div class="reading-block">
        <p class="japanese">
            とはいえ、それらが<ruby>実際<rt>じっさい</rt></ruby>に<ruby>役立<rt>やくた</rt></ruby>つ<ruby>機会<rt>きかい</rt></ruby>は<span class="vocab-word" data-info="そうそうない：(后接否定) 不常有，很难得。">そうそうない</span>。<ruby>大学生<rt>だいがくせい</rt></ruby>の<ruby>頃<rt>ころ</rt></ruby>、クラブ<ruby>合宿<rt>がっしゅく</rt></ruby>のための<span class="vocab-word" data-info="荷造り（にづくり）：打包行李。">荷造り</span>をしていて、<ruby>旅行<rt>りょこう</rt></ruby>カバンの<span class="vocab-word" data-info="把手（とって）：手柄，拉手。">把手</span>が<ruby>壊<rt>こわ</rt></ruby>れそうと<ruby>気<rt>き</rt></ruby>づいた。
        </p>
        <div class="translation">
            话虽如此，这些东西真正派上用场的机会其实微乎其微。大二那年，我正为社团合宿收拾行李，发现旅行箱的手柄好像快断了。
        </div>
    </div>

    <div class="reading-block">
        <p class="japanese">
            <ruby>修理<rt>しゅうり</rt></ruby>の<span class="vocab-word" data-info="猶予（ゆうよ）：宽限，余地。在此指“没有时间去修理了”。">猶予</span>はない。<ruby>途中<rt>とちゅう</rt></ruby>で<ruby>壊<rt>こわ</rt></ruby>れたら<span class="vocab-word" data-info="詰め替える（つめかえる）：（原型）换装，重新装入。">詰め替え</span>ようと、<ruby>巨大<rt>きょだい</rt></ruby>なトートバッグを<ruby>予備<rt>よび</rt></ruby>に<ruby>持参<rt>じさん</rt></ruby>して<ruby>出<rt>で</rt></ruby>かけた。すると<ruby>初日<rt>しょにち</rt></ruby>の<ruby>夜<rt>よる</rt></ruby>に<ruby>合宿所<rt>がっしゅくじょ</rt></ruby>が<span class="vocab-word" data-info="小火（ぼや）：很快被扑灭的小规模火灾。">小火</span>となり、<ruby>夜<rt>よ</rt></ruby>が<ruby>明<rt>あ</rt></ruby>け<ruby>次第<rt>しだい</rt></ruby>、<ruby>全員帰宅<rt>ぜんいんきたく</rt></ruby>と<ruby>決<rt>き</rt></ruby>まった。<ruby>部員<rt>ぶいん</rt></ruby>の<ruby>中<rt>なか</rt></ruby>には、<ruby>荷物<rt>にもつ</rt></ruby>に<ruby>煤<rt>すす</rt></ruby>がかかったり、カバンが<ruby>消火活動中<rt>しょうかかつどうちゅう</rt></ruby>に<ruby>水浸<rt>みずびた</rt></ruby>しになった<ruby>人<rt>ひと</rt></ruby>もいた。
        </p>
        <div class="translation">
            当时已没时间修理，我心想“万一路上断了就得换包”，便特意多带了一个巨大的托特包当备用。没成想，合宿第一晚驻地竟起了小火灾，天一亮大家就决定撤离。当时有的部员行李落满了灰，有的包被消防水淋成了落汤鸡。
        </div>
    </div>

    <div class="reading-block">
        <p class="japanese">
            「カバンがこれじゃ、<ruby>電車<rt>でんしゃ</rt></ruby>にも<ruby>乗<rt>の</rt></ruby>れないなあ……」と<ruby>困惑<rt>こんわく</rt></ruby>する<ruby>先輩<rt>せんぱい</rt></ruby>に、「あの、<ruby>予備<rt>よび</rt></ruby>のカバンあります」とトートバッグを<ruby>差<rt>さ</rt></ruby>し<ruby>出<rt>だ</rt></ruby>し、「なぜ<ruby>予備<rt>よび</rt></ruby>のカバン？」と<span class="vocab-word" data-info="仰天（ぎょうてん）：非常吃惊，大惊失色。">仰天</span>された。それ<ruby>以降<rt>いこう</rt></ruby>も<ruby>含<rt>ふく</rt></ruby>め、「<ruby>予備<rt>よび</rt></ruby>」がもっとも<ruby>役立<rt>やくた</rt></ruby>った<ruby>瞬間<rt>しゅんかん</rt></ruby>だった。
        </p>
        <div class="translation">
            一位前辈看着惨不忍睹的包困惑道：“弄成这样，连电车都坐不了啊……” 我立刻递上托特包：“那个，我带了备用的包。” 前辈惊呆了：“为什么会随身带备用的包？” 从那以后直到现在，那次都是我的“备用计划”最发光发热的时刻。
        </div>
    </div>

    <div class="reading-block">
        <p class="japanese">
            だから、<ruby>予備<rt>よび</rt></ruby>はそんなにいらないと<ruby>頭<rt>あたま</rt></ruby>では<ruby>理解<rt>りかい</rt></ruby>しているが、でももしかしてと思うと、やはり<ruby>様々<rt>さまざま</rt></ruby>なものを<ruby>準備<rt>じゅんび</rt></ruby>してしまう。なかでも<span class="vocab-word" data-info="顕著（けんちょ）：明显，显著。">顕著</span>なのが<ruby>移動中<rt>いどうちゅう</rt></ruby>に<ruby>読<rt>よ</rt></ruby>む<ruby>本<rt>ほん</rt></ruby>で、「<ruby>途中<rt>とちゅう</rt></ruby>で<ruby>読<rt>よ</rt></ruby>み<ruby>終<rt>お</rt></ruby>えたら」と<span class="vocab-word" data-info="心細い（こころぼそい）：心中没底，由于孤独而感到不安。">心細い</span>くなってしまうため、<ruby>読書中<rt>どくしょちゅう</rt></ruby>の<ruby>本<rt>ほん</rt></ruby>と<ruby>予備<rt>よび</rt></ruby>の<ruby>一冊<rt>いっさつ</rt></ruby>、<ruby>更<rt>さら</rt></ruby>に<span class="vocab-word" data-info="念の為（ねんのため）：以防万一。">念の為</span>の<ruby>予備<rt>よび</rt></ruby>の<ruby>予備<rt>よび</rt></ruby>と、カバンには必ず三冊以上が入っている。すべてが<ruby>文庫本<rt>ぶんこぼん</rt></ruby>としても、正直、かなり重く、そして<span class="vocab-word" data-info="かさばる：体积大，占地方。">かさばる</span>。
        </p>
        <div class="translation">
            因此，我理智上很清楚不需要带那么多东西，但只要想到“万一呢”，还是会准备得万全。其中最显著的便是路上读的书——因为总担心“万一在半路读完了”会心里没底，所以包里雷打不动地塞着三本书：一本正在读的，一本备用的，甚至还有一本备用的备用。哪怕全是轻便的文库本，说实话，也相当沉且占地方。
        </div>
    </div>

    <div class="reading-block">
        <p class="japanese">
            <ruby>読書<rt>どくしょ</rt></ruby>との<ruby>付<rt>つ</rt></ruby>き<ruby>合<rt>あ</rt></ruby>いは<ruby>長<rt>なが</rt></ruby>いため、<ruby>自分<rt>じぶん</rt></ruby>の<ruby>本<rt>ほん</rt></ruby>を<ruby>読<rt>よ</rt></ruby>める<ruby>速度<rt>そくど</rt></ruby>ぐらいわかっているのだ。<ruby>三冊目<rt>さんさつめ</rt></ruby>の<ruby>予備<rt>よび</rt></ruby>は、まず<ruby>要<rt>い</rt></ruby>らないだろうということも。にもかかわらず<ruby>必要以上<rt>ひつよういじょう</rt></ruby>の<ruby>予備<rt>よび</rt></ruby>を<span class="vocab-word" data-info="抱え込む（かかえこむ）：（原型）抱住，承担，带在身边。">抱え込んで</span>しまうのは、つまりは「これぐらいは<ruby>読<rt>よ</rt></ruby>みたいぞ！」という<ruby>自分自身<rt>じぶんじしん</rt></ruby>に<ruby>対<rt>たい</rt></ruby>する<span class="vocab-word" data-info="前のめり（まえのめり）：身体前倾，指积极、急切的姿态。">前のめり</span>な<ruby>宣言<rt>せんげん</rt></ruby>でもある。
        </p>
        <div class="translation">
            读了这么多年书，我当然清楚自己的阅读速度。我也心知肚明，第三本备用书基本是用不上的。尽管如此还要揣着超出必要的备用，归根结底，这是对自己下的一份积极的宣言——“我想要读到这个程度！”
        </div>
    </div>

    <div class="reading-block">
        <p class="japanese">
            <ruby>言<rt>い</rt></ruby>い<ruby>換<rt>か</rt></ruby>えればこれらの<ruby>予備<rt>よび</rt></ruby>を<ruby>必要<rt>ひつよう</rt></ruby>としなくなる<ruby>時<rt>とき</rt></ruby>とはすなわち、<ruby>読<rt>よ</rt></ruby>むことへの<span class="vocab-word" data-info="渇望（かつぼう）：渴望，热切盼望。">渇望</span>を<ruby>失<rt>うしな</rt></ruby>った<ruby>時<rt>とき</rt></ruby>だ。そう<ruby>思<rt>おも</rt></ruby>うと<ruby>肩<rt>かた</rt></ruby>に<span class="vocab-word" data-info="食い込む（くいこむ）：陷入，勒进，切入。">食い込む</span>カバンの<ruby>重<rt>おも</rt></ruby>さが我ながら<ruby>実<rt>じつ</rt></ruby>に<span class="vocab-word" data-info="青臭い（あおくさい）：（原型）幼稚，不成熟。">青臭く</span>、しかし、できれば<ruby>終生<rt>しゅうせい</rt></ruby>、<ruby>三冊目<rt>さんさつめ</rt></ruby>、いや<ruby>四冊目<rt>よんさつめ</rt></ruby>の<ruby>予備<rt>よび</rt></ruby>を<ruby>抱<rt>かか</rt></ruby>え<ruby>込<rt>こ</rt></ruby>み<ruby>続<rt>つづ</rt></ruby>けるぐらい、<span class="vocab-word" data-info="がむしゃら：拼命，不顾一切，鲁莽。">がむしゃら</span>な<ruby>読<rt>よ</rt></ruby>み<ruby>手<rt>て</rt></ruby>でいたいと<ruby>思<rt>おも</rt></ruby>っている。
        </p>
        <div class="translation">
            换句话说，当我不再需要这些备用书的那天，也就是我失去阅读渴望之时。想到这里，尽管勒得肩膀生疼的背包重量让我觉得自己有些“青涩感”，但我仍希望此生都能做一个如此“拼命”的读者，哪怕到了晚年，包里依然塞着第三本、甚至第四本备用书。
        </div>
    </div>
</div>

<div id="smart-tooltip"></div>

<div class="footer">Ichigo Ichie - 一期一会</div>

<script>
    // 1. (已移除) 实时日期逻辑 -> 改为在 HTML 中手动输入

    // 2. 译文切换
    function toggleTranslation() {
        document.querySelectorAll('.translation').forEach(el => {
            el.style.display = (el.style.display === 'block') ? 'none' : 'block';
        });
    }

    // 3. 智能自适应气泡逻辑
    const tooltip = document.getElementById('smart-tooltip');
    let activeWord = null;

    document.querySelectorAll('.vocab-word').forEach(word => {
        word.addEventListener('click', function(e) {
            e.stopPropagation();
            if (activeWord === this) { hideTooltip(); return; }

            activeWord = this;
            tooltip.innerText = this.getAttribute('data-info');
            tooltip.style.display = 'block';

            const rect = this.getBoundingClientRect();
            const tipRect = tooltip.getBoundingClientRect();
            const screenWidth = window.innerWidth;
            
            // 计算初始位置
            let left = rect.left + (rect.width / 2) - (tipRect.width / 2);
            let top = rect.top + window.scrollY - tipRect.height - 12;

            // 溢出检测与修正
            const margin = 15;
            let arrowOffset = '50%';

            if (left < margin) {
                left = margin;
                arrowOffset = (rect.left + rect.width/2 - margin) + 'px';
            } else if (left + tipRect.width > screenWidth - margin) {
                left = screenWidth - tipRect.width - margin;
                arrowOffset = (rect.left + rect.width/2 - left) + 'px';
            }

            tooltip.style.left = left + 'px';
            tooltip.style.top = top + 'px';
            tooltip.style.opacity = '1';

            // 动态修正箭头位置
            const styleTag = document.getElementById('dynamic-arrow') || document.createElement('style');
            styleTag.id = 'dynamic-arrow';
            styleTag.innerHTML = `#smart-tooltip::after { left: ${arrowOffset} !important; transform: translateX(-50%); }`;
            document.head.appendChild(styleTag);
        });
    });

    function hideTooltip() {
        tooltip.style.opacity = '0';
        setTimeout(() => { tooltip.style.display = 'none'; }, 200);
        activeWord = null;
    }

    document.addEventListener('click', hideTooltip);
    window.addEventListener('resize', hideTooltip);
</script>

</body>
</html>
