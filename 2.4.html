<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>日本語読解</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;500&display=swap');

        :root {
            --bg-color: #fdfaf5;
            --paper-color: #ffffff;
            --text-color: #2c2c2c;
            --accent-color: #b33e3e; 
            --sub-color: #787878;
            --popup-bg: #333333;
            --chinese-font: "Microsoft YaHei", "PingFang SC", sans-serif;
            --japanese-font: 'Noto Serif JP', serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--japanese-font);
            margin: 0;
            padding: 100px 15px 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* 顶部控制栏 */
        .top-bar {
            position: fixed; top: 0; left: 0; right: 0;
            height: 60px; background: rgba(253, 250, 245, 0.95);
            backdrop-filter: blur(8px);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 25px; z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        #today-date { font-size: 0.85rem; color: var(--accent-color); font-weight: 500; border-bottom: 1px solid; }
        .toggle-btn {
            background: white; color: var(--accent-color); border: 1px solid var(--accent-color);
            padding: 6px 14px; border-radius: 20px; font-size: 0.8rem;
            font-family: var(--chinese-font); cursor: pointer; transition: 0.3s;
        }
        .toggle-btn:hover { background: var(--accent-color); color: white; }

        /* 主容器 */
        .container {
            max-width: 720px; width: 100%;
            background: var(--paper-color); padding: 50px 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        .header-title { text-align: center; margin-bottom: 50px; }
        .reading-block { margin-bottom: 45px; position: relative; }

        p.japanese {
            font-size: 1.15rem; line-height: 2.8; 
            text-align: justify; margin: 0;
        }

        ruby rt { font-size: 0.55em; color: var(--sub-color); letter-spacing: 0; }

        /* 译文（黑体中文） */
        .translation {
            display: none; margin-top: 20px; font-size: 0.95rem;
            color: #5a626b; line-height: 1.8; padding: 18px 20px;
            background-color: #f7f8f9; font-family: var(--chinese-font);
            border-left: 3px solid #eee; text-align: justify;
        }
        .translation::before { content: "訳"; display: block; font-size: 0.7rem; color: #ccc; margin-bottom: 5px; font-weight: bold; }

        /* 重点词汇样式 */
        .vocab-word {
            color: var(--accent-color);
            border-bottom: 2px solid #f2d0d0;
            cursor: pointer;
            font-weight: 500;
        }

        /* 动态气泡容器 */
        #smart-tooltip {
            position: absolute; z-index: 2000;
            background: var(--popup-bg); color: white;
            padding: 12px 16px; border-radius: 8px;
            font-size: 0.85rem; font-family: var(--chinese-font);
            line-height: 1.6; max-width: 280px; min-width: 140px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none; opacity: 0; pointer-events: none;
        }
        #smart-tooltip::after {
            content: ""; position: absolute; top: 100%;
            border: 8px solid transparent; border-top-color: var(--popup-bg);
        }

        .footer { margin-top: 50px; color: #ccc; font-size: 0.8rem; letter-spacing: 3px; }
    </style>
</head>
<body>

<div class="top-bar">
    <a href="read.html" class="toggle-btn" style="text-decoration: none; margin-right: 15px;">← 戻る</a>
    <div id="today-date" style="flex-grow: 1; text-align: center; border-bottom: none;"></div>
    <button class="toggle-btn" onclick="toggleTranslation()">訳文を表示/非表示</button>
</div>

<div class="container">
    <div class="header-title">
    <h2 style="font-weight: 500; letter-spacing: 0.1em; margin-bottom: 5px;">窓越しの鳥</h2>
    <span style="color: #bbb; font-size: 0.8rem;">窗外的鸟</span>
</div>

<div class="reading-block">
    <p class="japanese">
        <ruby>最近<rt>さいきん</rt></ruby>、<ruby>仕事中<rt>しごとちゅう</rt></ruby>に<ruby>外<rt>そと</rt></ruby>を<ruby>眺<rt>なが</rt></ruby>めることが<ruby>増<rt>ふ</rt></ruby>えた。<ruby>理由<rt>りゆう</rt></ruby>は<ruby>簡単<rt>かんたん</rt></ruby>で、わたしの<ruby>机<rt>つくえ</rt></ruby>からちょうど<span class="vocab-word" data-info="てっぺん：顶端，最高处。">てっぺん</span>が<ruby>見<rt>み</rt></ruby>える<ruby>桜<rt>さくら</rt></ruby>の<ruby>木<rt>き</rt></ruby>に、<ruby>様々<rt>さまざま</rt></ruby>な<ruby>鳥<rt>とり</rt></ruby>が<ruby>遊<rt>あそ</rt></ruby>びに<ruby>来<rt>き</rt></ruby>ているためだ。
    </p>
    <div class="translation">
        最近工作时，我望向窗外的次数变多了。理由很简单，从我的书桌望过去，正好能看见一棵樱花树的树梢，各种各样的小鸟常来那里嬉戏。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        <ruby>元々<rt>もともと</rt></ruby><ruby>我<rt>わ</rt></ruby>が<ruby>家<rt>や</rt></ruby>は<ruby>市街地<rt>しがいち</rt></ruby>にもかかわらず<ruby>山<rt>やま</rt></ruby>が<ruby>近<rt>ちか</rt></ruby>く、イタチや<ruby>狸<rt>たぬき</rt></ruby>、はたまたハクビシンといった<ruby>生<rt>い</rt></ruby>き<ruby>物<rt>もの</rt></ruby>が<ruby>始終<rt>しじゅう</rt></ruby><ruby>目撃<rt>もくげき</rt></ruby>されている。それだけに<ruby>庭<rt>にわ</rt></ruby>に<ruby>来<rt>く</rt></ruby>る<ruby>鳥<rt>とり</rt></ruby>もカラスや<ruby>鳩<rt>はと</rt></ruby>といった<ruby>都会<rt>とかい</rt></ruby>の<ruby>鳥<rt>とり</rt></ruby>から、スズメやメジロ、ヒヨドリ、はたまた<ruby>急<rt>いそ</rt></ruby>いで<ruby>図鑑<rt>ずかん</rt></ruby>を<span class="vocab-word" data-info="引っ張り出さねば（ひっぱりださねば）：（原型：引っ張り出す）拖出，拿出。这里指必须要把图鉴找出来翻阅。">引っ張り出さねば</span><ruby>名<rt>な</rt></ruby>が<ruby>分<rt>わ</rt></ruby>からぬ<ruby>鳥<rt>とり</rt></ruby>まで<span class="vocab-word" data-info="実に（じつに）：实在，确实，非常。">実に</span><span class="vocab-word" data-info="多彩（たさい）：丰富多彩，各式各样。">多彩</span>。<ruby>移動中<rt>いどうちゅう</rt></ruby>の<ruby>休憩<rt>きゅうけい</rt></ruby><ruby>地点<rt>ちてん</rt></ruby>に<ruby>我<rt>わ</rt></ruby>が<ruby>家<rt>や</rt></ruby>の<ruby>桜<rt>さくら</rt></ruby>がいいらしく、<ruby>朝<rt>あさ</rt></ruby>から<ruby>夕刻<rt>ゆうこく</rt></ruby>まで<ruby>色々<rt>いろいろ</rt></ruby>な<ruby>鳥<rt>とり</rt></ruby>が<ruby>羽根<rt>はね</rt></ruby>を<ruby>休<rt>やす</rt></ruby>めてゆく。まだ<ruby>一度<rt>いちど</rt></ruby>も<ruby>姿<rt>すがた</rt></ruby>を<ruby>見<rt>み</rt></ruby>ていないが、<ruby>冬<rt>ふゆ</rt></ruby>の<ruby>夜<rt>よる</rt></ruby>には<ruby>梟<rt>ふくろう</rt></ruby>の<ruby>鳴<rt>な</rt></ruby>き<ruby>声<rt>ごえ</rt></ruby>も<ruby>聞<rt>き</rt></ruby>くほどだ。
    </p>
    <div class="translation">
        虽说我家位于市区，但因为紧邻山峦，黄鼬、狸猫，甚至是果子狸这类生灵也时常出没。正因如此，造访庭院的飞鸟也极其多样，既有乌鸦、鸽子这些城市“常客”，也有麻雀、绣眼鸟、白头鹯，甚至还有些名字生僻到必须立刻翻阅图鉴才能识得的鸟儿。我家的樱花树似乎是它们迁徙途中的绝佳驿站，从清晨到黄昏，总有不同的鸟儿在此歇脚。虽然至今未见其形，但在冬日的夜晚，偶尔还能听到猫头鹰的鸣叫。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        この<ruby>半月<rt>はんつき</rt></ruby>ほど<ruby>頻繁<rt>ひんぱん</rt></ruby>に<ruby>来<rt>く</rt></ruby>るのはスズメの<ruby>一家<rt>いっか</rt></ruby>で、まだ<ruby>飛<rt>と</rt></ruby>び<ruby>方<rt>かた</rt></ruby>の<span class="vocab-word" data-info="拙い（つたない）：笨拙，不高明。这里指小鸟飞得还不熟练。">拙い</span><ruby>子<rt>こ</rt></ruby>スズメたちが<ruby>木<rt>き</rt></ruby>の<ruby>周囲<rt>しゅうい</rt></ruby>を<span class="vocab-word" data-info="危なっかしく（あぶなっかしく）：令人担忧，危险的样子，摇摇晃晃。">危なっかしく</span><ruby>飛<rt>と</rt></ruby>んでいる。ただ<ruby>時々<rt>ときどき</rt></ruby>、<ruby>我<rt>わ</rt></ruby>が<ruby>家<rt>や</rt></ruby>のごく<ruby>細<rt>ほそ</rt></ruby>い<ruby>窓枠<rt>まどわく</rt></ruby>に<ruby>摑<rt>つか</rt></ruby>まろうとして<ruby>失敗<rt>しっぱい</rt></ruby>するスズメもおり、<ruby>何<rt>なに</rt></ruby>の<ruby>手助<rt>てだす</rt></ruby>けもできないのに、そのたびに<ruby>仕事<rt>しごと</rt></ruby>を<ruby>中断<rt>ちゅうだん</rt></ruby>してはらはらと<ruby>見守<rt>みまも</rt></ruby>ってしまう。
    </p>
    <div class="translation">
        这半个月来，最常造访的是麻雀一家，那些飞行技术尚且生疏的小麻雀们，总是在树木周围踉踉跄跄地飞着。偶尔，有的麻雀想抓牢那极细的窗框却不慎失手。明明我什么忙也帮不上，却总忍不住在那一刻中断工作，心惊胆战地注视着它们。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        とはいえわたしは<ruby>別<rt>べつ</rt></ruby>に、<ruby>鳥<rt>とり</rt></ruby>たちを<ruby>個体<rt>こたい</rt></ruby><ruby>認識<rt>にんしき</rt></ruby>しているわけではない。ただただ<ruby>通<rt>とお</rt></ruby>り<ruby>過<rt>す</rt></ruby>ぎてゆく<ruby>彼<rt>かれ</rt></ruby>らを、<span class="vocab-word" data-info="窓越し（まどごし）：隔着窗户。">窓越し</span>に<ruby>一方的<rt>いっぽうてき</rt></ruby>に<ruby>眺<rt>なが</rt></ruby>めるだけだ。<ruby>恐<rt>おそ</rt></ruby>らく<ruby>先方<rt>せんぽう</rt></ruby>は、そんな<ruby>人間<rt>にんげん</rt></ruby>がいることすら<ruby>気<rt>き</rt></ruby>づいていないに<ruby>違<rt>ちが</rt></ruby>いない。
    </p>
    <div class="translation">
        即便如此，我其实并不能分辨出每一只鸟。我只是隔着一扇窗，单方面地注视着这些匆匆过客。恐怕对方甚至不曾察觉，这背后竟然还存在着这样一个人类。
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        しかしたとえば<ruby>花<rt>はな</rt></ruby>は<ruby>別<rt>べつ</rt></ruby>に<ruby>我々<rt>われわれ</rt></ruby>を<ruby>喜<rt>よろこ</rt></ruby>ばせようと<ruby>思<rt>おも</rt></ruby>って<ruby>咲<rt>さ</rt></ruby>いているわけではないし、<ruby>太陽<rt>たいよう</rt></ruby>も<ruby>月星<rt>つきほし</rt></ruby>も<ruby>人間<rt>にんげん</rt></ruby>の<ruby>思<rt>おも</rt></ruby>いとは<ruby>無関係<rt>むかんけい</rt></ruby>に<ruby>存在<rt>そんざい</rt></ruby>する。にもかかわらずただ<ruby>黙々<rt>もくもく</rt></ruby>と<ruby>在<rt>あ</rt></ruby>るそれらを<span class="vocab-word" data-info="愛で（めで）：（原型：愛でる）欣赏，爱慕，赏玩。">愛で</span>、<ruby>時<rt>とき</rt></ruby>に<ruby>意味<rt>いみ</rt></ruby>を<span class="vocab-word" data-info="見出す（みいだす）：发现，找出，看出。">見出す</span><ruby>我々<rt>われわれ</rt></ruby>の<ruby>行為<rt>こうい</rt></ruby>は、<ruby>一方通行<rt>いっぽうつうこう</rt></ruby>ではあるものの、<span class="vocab-word" data-info="ゆるやか：缓慢，舒缓，宽松。这里指一种温和、柔和的情感。">ゆるやか</span>な<ruby>愛情<rt>あいじょう</rt></ruby>に<ruby>満<rt>み</rt></ruby>ちてはいないだろうか。
    </p>
    <div class="translation">
        然而，花朵并非为了取悦我们而绽放，日月星辰的存在也与人类的思绪无关。即便如此，我们依然会默默地怜爱万物，并在其中寻觅意义。这种行为虽是“单行道”，却不也恰恰充满了温润且持久的爱意吗？
    </div>
</div>

<div class="reading-block">
    <p class="japanese">
        <ruby>桜<rt>さくら</rt></ruby>に<ruby>来<rt>く</rt></ruby>る<ruby>小鳥<rt>ことり</rt></ruby>が<ruby>運<rt>はこ</rt></ruby>んできたらしく、<ruby>窓<rt>まど</rt></ruby>から<ruby>見下<rt>みお</rt></ruby>ろした<ruby>庭<rt>にわ</rt></ruby>には<ruby>今<rt>いま</rt></ruby>、<ruby>名前<rt>なまえ</rt></ruby>も<ruby>分<rt>わ</rt></ruby>からない<ruby>草<rt>くさ</rt></ruby>が<span class="vocab-word" data-info="びっしり：密密麻麻，挤得满满的。">びっしり</span>と<ruby>生<rt>は</rt></ruby>えている。その<ruby>中<rt>なか</rt></ruby>に<span class="vocab-word" data-info="ひょろりとした：纤细，细长，瘦长。形容细长而软弱的样子。">ひょろりとした</span><ruby>紫<rt>むらさき</rt></ruby>の<ruby>小花<rt>こばな</rt></ruby>があったので、<ruby>摘<rt>つ</rt></ruby>んできてコップに<ruby>飾<rt>かざ</rt></ruby>った。<ruby>彼<rt>かれ</rt></ruby>らはなにも<ruby>知<rt>し</rt></ruby>らなくとも、わたしが<ruby>彼<rt>かれ</rt></ruby>らから<ruby>与<rt>あた</rt></ruby>えてもらう<ruby>喜<rt>よろこ</rt></ruby>びは<span class="vocab-word" data-info="計り知れない（はかりしれない）：无法估量，不可估量。">計り知れない</span>。ならばわたしもまた<ruby>知<rt>し</rt></ruby>らぬうちに<ruby>誰<rt>だれ</rt></ruby>かになにかを<ruby>与<rt>あた</rt></ruby>えられていればと<ruby>思<rt>おも</rt></ruby>いながら、<ruby>黙々<rt>もくもく</rt></ruby>と<ruby>日々<rt>ひび</rt></ruby>を<ruby>過<rt>す</rt></ruby>ごす。
    </p>
    <div class="translation">
        或许是托了樱花树上那些小鸟的福，在俯瞰窗外的庭院里，如今长满了叫不出名字的杂草。我从中摘下一朵纤细的紫色小花，插进水杯里当作装饰。它们即便一无所知，给予我的快乐却是无法估量的。那么，但愿我也能在不经意间，成为那个给予他人些许慰藉的人——怀揣着这样的祈愿，我继续默然度过每一天。
    </div>
</div>
</div>

<div id="smart-tooltip"></div>

<div class="footer">Ichigo Ichie - 一期一会</div>

<script>
    // 1. 实时日期
    const dateEl = document.getElementById('today-date');
    const now = new Date();
    dateEl.innerText = now.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'short' });

    // 2. 译文切换
    function toggleTranslation() {
        document.querySelectorAll('.translation').forEach(el => {
            el.style.display = (el.style.display === 'block') ? 'none' : 'block';
        });
    }

    // 3. 智能自适应气泡逻辑
    const tooltip = document.getElementById('smart-tooltip');
    let activeWord = null;

    document.querySelectorAll('.vocab-word').forEach(word => {
        word.addEventListener('click', function(e) {
            e.stopPropagation();
            if (activeWord === this) { hideTooltip(); return; }

            activeWord = this;
            tooltip.innerText = this.getAttribute('data-info');
            tooltip.style.display = 'block';

            const rect = this.getBoundingClientRect();
            const tipRect = tooltip.getBoundingClientRect();
            const screenWidth = window.innerWidth;
            
            // 计算初始位置
            let left = rect.left + (rect.width / 2) - (tipRect.width / 2);
            let top = rect.top + window.scrollY - tipRect.height - 12;

            // 溢出检测与修正
            const margin = 15;
            let arrowOffset = '50%';

            if (left < margin) {
                left = margin;
                arrowOffset = (rect.left + rect.width/2 - margin) + 'px';
            } else if (left + tipRect.width > screenWidth - margin) {
                left = screenWidth - tipRect.width - margin;
                arrowOffset = (rect.left + rect.width/2 - left) + 'px';
            }

            tooltip.style.left = left + 'px';
            tooltip.style.top = top + 'px';
            tooltip.style.opacity = '1';

            // 动态修正箭头位置
            const styleTag = document.getElementById('dynamic-arrow') || document.createElement('style');
            styleTag.id = 'dynamic-arrow';
            styleTag.innerHTML = `#smart-tooltip::after { left: ${arrowOffset} !important; transform: translateX(-50%); }`;
            document.head.appendChild(styleTag);
        });
    });

    function hideTooltip() {
        tooltip.style.opacity = '0';
        setTimeout(() => { tooltip.style.display = 'none'; }, 200);
        activeWord = null;
    }

    document.addEventListener('click', hideTooltip);
    window.addEventListener('resize', hideTooltip);
</script>

</body>
</html>
